<!DOCTYPE html>

<html>
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <title></title>
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
        <link rel="stylesheet" href="/styles/profile.css">

        <script>
            function Handle()
            {
                window.location.href='/logout';
            }
        </script>
    </head>
    <body>
        <div class="main-div">
            <button type="button" onclick="Handle()" class="btn btn-info mb-3 mt-7 " style="margin-left: 70rem;" >Logout</button>
            <h1>Hello , <%= user.username %> &#128075;</h1>
           <h2>You can create a post</h2>
           <form action="/post" method="post">
            
                <label for="exampleFormControlTextarea1" class="form-label">Create post</label>
                <textarea class="form-control" id="exampleFormControlTextarea1" rows="3" style="width: 50%; background-color: rgb(205, 205, 205); font-family: 'Courier New', Courier, monospace;" name="content" placeholder="what's in your mind ?" ></textarea>
                <button type="submit" class="btn btn-info mb-3 mt-3" >Create</button>
           </form>
           <h3 class="mt-5">Your Posts</h3>
           <%if(user.posts.length >0){%>
           <% user.posts.forEach(function(post){%>
            <div class="card mt-3"style="width: 28rem; background-color: rgb(71, 69, 69);">
                <div class="card-body">
                  <h5 class="card-title" style="color: white;">@<%= user.username %></h5>
                  <h5 class="card-title" style="color: white;"><%= post.content %></h5>
                  <small class="card-title" style="color: white;"><%= post.likes.length %></small>
                  
                  
                  <a class="btn btn-dark  mt-4" href="/like/<%= post._id %>"><%= post.likes.indexOf(user._id) === -1 ? "Like" : "Unlike" %></a>
                  <a href="/edit/" class="btn btn-light mt-4">Edit</a>
                  
                </div>
               </div>
           <%})%>
           <% } else {%>
            <h1>No posts yet</h1>
            <% }%>
    </body>
</html>